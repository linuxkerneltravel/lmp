/*! 
 Build based on gin-vue-admin 
 Time : 1646987814000 */
var e=Object.defineProperty,l=Object.getOwnPropertySymbols,a=Object.prototype.hasOwnProperty,t=Object.prototype.propertyIsEnumerable,o=(l,a,t)=>a in l?e(l,a,{enumerable:!0,configurable:!0,writable:!0,value:t}):l[a]=t,u=(e,l,a)=>new Promise(((t,o)=>{var u=e=>{try{d(a.next(e))}catch(l){o(l)}},i=e=>{try{d(a.throw(e))}catch(l){o(l)}},d=e=>e.done?t(e.value):Promise.resolve(e.value).then(u,i);d((a=a.apply(e,l)).next())}));import{_ as i,j as d,k as n,l as r,m as p,n as s}from"../gva/gin-vue-admin-index.1646987814000.js";import m from"./gin-vue-admin-icon.1646987814000.js";import{w as v}from"./gin-vue-admin-warningBar.1646987814000.js";import{q as c,r as f,k as h,o as b,i as y,s as w,j as g,u as V,D as _,I as k,J as I,x as D,v as x,B as U,G as C,H as z,e as j,d as q}from"./gin-vue-admin-vendor.1646987814000.js";const P=e=>(C("data-v-231f83dd"),e=e(),z(),e),A={class:"gva-table-box"},O={class:"gva-btn-list"},S=U("新增根菜单"),T={class:"icon-column"},B=U("添加子菜单"),M=U("编辑"),N=U("删除"),E={style:{display:"inline-flex"}},F=U(" 路由Path "),H=U("添加参数"),G=P((()=>w("span",{style:{"font-size":"12px","margin-right":"12px"}},"如果菜单包含子菜单，请创建router-view二级路由页面或者",-1))),J=U("点我设置"),K=U("新增菜单参数"),$=U("删除"),L={class:"dialog-footer"},Q=U("取 消"),R=U("确 定"),W={name:"Menus"};var X=i(Object.assign(W,{setup(e){const i=c({path:[{required:!0,message:"请输入菜单name",trigger:"blur"}],component:[{required:!0,message:"请输入文件路径",trigger:"blur"}],"meta.title":[{required:!0,message:"请输入菜单展示名称",trigger:"blur"}]}),U=f(1),C=f(0),z=f(999),P=f([]),W=f({}),X=()=>u(this,null,(function*(){const e=yield d(((e,u)=>{for(var i in u||(u={}))a.call(u,i)&&o(e,i,u[i]);if(l)for(var i of l(u))t.call(u,i)&&o(e,i,u[i]);return e})({page:U.value,pageSize:z.value},W.value));0===e.code&&(P.value=e.data.list,C.value=e.data.total,U.value=e.data.page,z.value=e.data.pageSize)}));X();const Y=f({ID:0,path:"",name:"",hidden:"",parentId:"",component:"",meta:{title:"",icon:"",defaultMenu:!1,closeTab:!1,keepAlive:!1},parameters:[]}),Z=()=>{Y.value.path=Y.value.name},ee=e=>{oe(),e()},le=e=>{j.confirm("此操作将永久删除所有角色下该菜单, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((()=>u(this,null,(function*(){0===(yield n({ID:e})).code&&(q({type:"success",message:"删除成功!"}),1===P.value.length&&U.value>1&&U.value--,X())})))).catch((()=>{q({type:"info",message:"已取消删除"})}))},ae=f(null),te=f(!1),oe=()=>{te.value=!1,ae.value.resetFields(),Y.value={ID:0,path:"",name:"",hidden:"",parentId:"",component:"",meta:{title:"",icon:"",defaultMenu:!1,keepAlive:""}}},ue=f(!1),ie=()=>{oe(),ue.value=!1},de=()=>u(this,null,(function*(){ae.value.validate((e=>u(this,null,(function*(){if(e){let e;e=se.value?yield r(Y.value):yield p(Y.value),0===e.code&&(q({type:"success",message:se.value?"编辑成功":"添加成功!"}),X()),oe(),ue.value=!1}}))))})),ne=f([{ID:"0",title:"根菜单"}]),re=()=>{ne.value=[{ID:"0",title:"根目录"}],pe(P.value,ne.value,!1)},pe=(e,l,a)=>{e&&e.forEach((e=>{if(e.children&&e.children.length){const t={title:e.meta.title,ID:String(e.ID),disabled:a||e.ID===Y.value.ID,children:[]};pe(e.children,t.children,a||e.ID===Y.value.ID),l.push(t)}else{const t={title:e.meta.title,ID:String(e.ID),disabled:a||e.ID===Y.value.ID};l.push(t)}}))},se=f(!1),me=f("新增菜单"),ve=e=>{me.value="新增菜单",Y.value.parentId=String(e),se.value=!1,re(),ue.value=!0},ce=e=>u(this,null,(function*(){me.value="编辑菜单";const l=yield s({id:e});Y.value=l.data.menu,se.value=!0,re(),ue.value=!0}));return(e,l)=>{const a=h("el-button"),t=h("el-table-column"),o=h("el-icon"),u=h("el-table"),d=h("el-input"),n=h("el-form-item"),r=h("el-checkbox"),p=h("el-option"),s=h("el-select"),c=h("el-cascader"),f=h("el-form"),U=h("el-dialog");return b(),y("div",null,[w("div",A,[w("div",O,[g(a,{size:"mini",type:"primary",icon:"plus",onClick:l[0]||(l[0]=e=>ve("0"))},{default:V((()=>[S])),_:1})]),g(u,{data:P.value,"row-key":"ID"},{default:V((()=>[g(t,{align:"left",label:"ID","min-width":"100",prop:"ID"}),g(t,{align:"left",label:"路由Name","show-overflow-tooltip":"","min-width":"160",prop:"name"}),g(t,{align:"left",label:"路由Path","show-overflow-tooltip":"","min-width":"160",prop:"path"}),g(t,{align:"left",label:"是否隐藏","min-width":"100",prop:"hidden"},{default:V((e=>[w("span",null,_(e.row.hidden?"隐藏":"显示"),1)])),_:1}),g(t,{align:"left",label:"父节点","min-width":"90",prop:"parentId"}),g(t,{align:"left",label:"排序","min-width":"70",prop:"sort"}),g(t,{align:"left",label:"文件路径","min-width":"360",prop:"component"}),g(t,{align:"left",label:"展示名称","min-width":"120",prop:"authorityName"},{default:V((e=>[w("span",null,_(e.row.meta.title),1)])),_:1}),g(t,{align:"left",label:"图标","min-width":"140",prop:"authorityName"},{default:V((e=>[w("div",T,[g(o,null,{default:V((()=>[(b(),k(I(e.row.meta.icon)))])),_:2},1024),w("span",null,_(e.row.meta.icon),1)])])),_:1}),g(t,{align:"left",fixed:"right",label:"操作",width:"300"},{default:V((e=>[g(a,{size:"mini",type:"text",icon:"plus",onClick:l=>ve(e.row.ID)},{default:V((()=>[B])),_:2},1032,["onClick"]),g(a,{size:"mini",type:"text",icon:"edit",onClick:l=>ce(e.row.ID)},{default:V((()=>[M])),_:2},1032,["onClick"]),g(a,{size:"mini",type:"text",icon:"delete",onClick:l=>le(e.row.ID)},{default:V((()=>[N])),_:2},1032,["onClick"])])),_:1})])),_:1},8,["data"])]),g(U,{modelValue:ue.value,"onUpdate:modelValue":l[13]||(l[13]=e=>ue.value=e),"before-close":ee,title:me.value},{footer:V((()=>[w("div",L,[g(a,{size:"small",onClick:ie},{default:V((()=>[Q])),_:1}),g(a,{size:"small",type:"primary",onClick:de},{default:V((()=>[R])),_:1})])])),default:V((()=>[g(v,{title:"新增菜单，需要在角色管理内配置权限才可使用"}),ue.value?(b(),k(f,{key:0,ref_key:"menuForm",ref:ae,inline:!0,model:Y.value,rules:D(i),"label-position":"top","label-width":"85px"},{default:V((()=>[g(n,{label:"路由Name",prop:"path",style:{width:"30%"}},{default:V((()=>[g(d,{modelValue:Y.value.name,"onUpdate:modelValue":l[1]||(l[1]=e=>Y.value.name=e),autocomplete:"off",placeholder:"唯一英文字符串",onChange:Z},null,8,["modelValue"])])),_:1}),g(n,{prop:"path",style:{width:"30%"}},{label:V((()=>[w("div",E,[F,g(r,{modelValue:te.value,"onUpdate:modelValue":l[2]||(l[2]=e=>te.value=e),style:{float:"right","margin-left":"20px"}},{default:V((()=>[H])),_:1},8,["modelValue"])])])),default:V((()=>[g(d,{modelValue:Y.value.path,"onUpdate:modelValue":l[3]||(l[3]=e=>Y.value.path=e),disabled:!te.value,autocomplete:"off",placeholder:"建议只在后方拼接参数"},null,8,["modelValue","disabled"])])),_:1}),g(n,{label:"是否隐藏",style:{width:"30%"}},{default:V((()=>[g(s,{modelValue:Y.value.hidden,"onUpdate:modelValue":l[4]||(l[4]=e=>Y.value.hidden=e),placeholder:"是否在列表隐藏"},{default:V((()=>[g(p,{value:!1,label:"否"}),g(p,{value:!0,label:"是"})])),_:1},8,["modelValue"])])),_:1}),g(n,{label:"父节点ID",style:{width:"30%"}},{default:V((()=>[g(c,{modelValue:Y.value.parentId,"onUpdate:modelValue":l[5]||(l[5]=e=>Y.value.parentId=e),style:{width:"100%"},disabled:!se.value,options:ne.value,props:{checkStrictly:!0,label:"title",value:"ID",disabled:"disabled",emitPath:!1},"show-all-levels":!1,filterable:""},null,8,["modelValue","disabled","options"])])),_:1}),g(n,{label:"文件路径",prop:"component",style:{width:"60%"}},{default:V((()=>[g(d,{modelValue:Y.value.component,"onUpdate:modelValue":l[6]||(l[6]=e=>Y.value.component=e),autocomplete:"off"},null,8,["modelValue"]),G,g(a,{size:"mini",onClick:l[7]||(l[7]=e=>Y.value.component="view/routerHolder.vue")},{default:V((()=>[J])),_:1})])),_:1}),g(n,{label:"展示名称",prop:"meta.title",style:{width:"30%"}},{default:V((()=>[g(d,{modelValue:Y.value.meta.title,"onUpdate:modelValue":l[8]||(l[8]=e=>Y.value.meta.title=e),autocomplete:"off"},null,8,["modelValue"])])),_:1}),g(n,{label:"图标",prop:"meta.icon",style:{width:"30%"}},{default:V((()=>[g(m,{meta:Y.value.meta,style:{width:"100%"}},null,8,["meta"])])),_:1}),g(n,{label:"排序标记",prop:"sort",style:{width:"30%"}},{default:V((()=>[g(d,{modelValue:Y.value.sort,"onUpdate:modelValue":l[9]||(l[9]=e=>Y.value.sort=e),modelModifiers:{number:!0},autocomplete:"off"},null,8,["modelValue"])])),_:1}),g(n,{label:"KeepAlive",prop:"meta.keepAlive",style:{width:"30%"}},{default:V((()=>[g(s,{modelValue:Y.value.meta.keepAlive,"onUpdate:modelValue":l[10]||(l[10]=e=>Y.value.meta.keepAlive=e),style:{width:"100%"},placeholder:"是否keepAlive缓存页面"},{default:V((()=>[g(p,{value:!1,label:"否"}),g(p,{value:!0,label:"是"})])),_:1},8,["modelValue"])])),_:1}),g(n,{label:"CloseTab",prop:"meta.closeTab",style:{width:"30%"}},{default:V((()=>[g(s,{modelValue:Y.value.meta.closeTab,"onUpdate:modelValue":l[11]||(l[11]=e=>Y.value.meta.closeTab=e),style:{width:"100%"},placeholder:"是否自动关闭tab"},{default:V((()=>[g(p,{value:!1,label:"否"}),g(p,{value:!0,label:"是"})])),_:1},8,["modelValue"])])),_:1})])),_:1},8,["model","rules"])):x("",!0),w("div",null,[g(a,{size:"small",type:"primary",icon:"edit",onClick:l[12]||(l[12]=e=>{return(l=Y.value).parameters||(l.value.parameters=[]),void l.parameters.push({type:"query",key:"",value:""});var l})},{default:V((()=>[K])),_:1}),g(u,{data:Y.value.parameters,style:{width:"100%"}},{default:V((()=>[g(t,{align:"left",prop:"type",label:"参数类型",width:"180"},{default:V((e=>[g(s,{modelValue:e.row.type,"onUpdate:modelValue":l=>e.row.type=l,placeholder:"请选择"},{default:V((()=>[g(p,{key:"query",value:"query",label:"query"}),g(p,{key:"params",value:"params",label:"params"})])),_:2},1032,["modelValue","onUpdate:modelValue"])])),_:1}),g(t,{align:"left",prop:"key",label:"参数key",width:"180"},{default:V((e=>[w("div",null,[g(d,{modelValue:e.row.key,"onUpdate:modelValue":l=>e.row.key=l},null,8,["modelValue","onUpdate:modelValue"])])])),_:1}),g(t,{align:"left",prop:"value",label:"参数值"},{default:V((e=>[w("div",null,[g(d,{modelValue:e.row.value,"onUpdate:modelValue":l=>e.row.value=l},null,8,["modelValue","onUpdate:modelValue"])])])),_:1}),g(t,{align:"left"},{default:V((e=>[w("div",null,[g(a,{type:"danger",size:"small",icon:"delete",onClick:l=>{return a=Y.value.parameters,t=e.$index,void a.splice(t,1);var a,t}},{default:V((()=>[$])),_:2},1032,["onClick"])])])),_:1})])),_:1},8,["data"])])])),_:1},8,["modelValue","title"])])}}}),[["__scopeId","data-v-231f83dd"]]);export{X as default};
